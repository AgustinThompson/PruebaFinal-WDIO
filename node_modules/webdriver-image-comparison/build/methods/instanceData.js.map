{"version":3,"file":"instanceData.js","sourceRoot":"","sources":["../../lib/methods/instanceData.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,0CAU0B;AAC1B,gFAA2E;AAQ3E,SAA8B,uBAAuB,CACnD,QAAkB,EAClB,eAAgC,EAChC,gBAAyB;;;;;wBAGa,WAAM,QAAQ,CAAC,6BAAmB,CAAC,EAAA;;oBAAnE,WAAW,GAAqB,SAAmC;oBACjE,uBAAuB,GAA2E,eAAe,wBAA1F,EAAE,oBAAoB,GAAqD,eAAe,qBAApE,EAAE,WAAW,GAAwC,eAAe,YAAvD,EAAE,mBAAmB,GAAmB,eAAe,oBAAlC,EAAE,YAAY,GAAK,eAAe,aAApB,CAAqB;oBAGpH,SAAS,GAAG,IAAA,sBAAc,EAAC,YAAY,CAAC,CAAC;oBACzC,KAAK,GAAG,IAAA,kBAAU,EAAC,YAAY,CAAC,CAAC;oBACjC,QAAQ,GAAG,IAAA,qBAAa,EAAC,YAAY,CAAC,CAAC;oBACvC,eAAe,GAAG,IAAA,0BAAkB,EAAC,WAAW,CAAC,CAAC;oBAClD,qBAAqB,GAAG,IAAA,gCAAwB,EAAC,YAAY,EAAE,WAAW,CAAC,CAAC;oBAC5E,4BAA4B,GAAG,IAAA,uCAA+B,EAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;oBAClG,+BAA+B,GAAG,IAAA,0CAAkC,EAAC,YAAY,EAAE,mBAAmB,CAAC,CAAC;oBACxG,iBAAiB,GAAG,IAAA,kCAA0B,EAAC;wBACnD,YAAY,cAAA;wBACZ,WAAW,aAAA;wBACX,mBAAmB,qBAAA;wBACnB,uBAAuB,yBAAA;wBACvB,gBAAgB,kBAAA;qBACjB,CAAC,CAAC;oBACG,cAAc,GAAG,IAAA,+BAAuB,EAAC,EAAE,YAAY,cAAA,EAAE,WAAW,aAAA,EAAE,oBAAoB,sBAAA,EAAE,gBAAgB,kBAAA,EAAE,CAAC,CAAC;oBAGtH,0CACK,WAAW,GACX,eAAe,KAClB,uBAAuB,EAAE,iBAAiB,EAC1C,SAAS,WAAA,EACT,+BAA+B,iCAAA,EAC/B,4BAA4B,8BAAA,EAC5B,KAAK,OAAA,EACL,QAAQ,UAAA,EACR,eAAe,iBAAA,EACf,qBAAqB,uBAAA,EACrB,oBAAoB,EAAE,cAAc,KACpC;;;;CACH;AAxCD,0CAwCC","sourcesContent":["import {\n  checkIsMobile,\n  checkAndroidChromeDriverScreenshot,\n  checkAndroidNativeWebScreenshot,\n  checkIsAndroid,\n  checkIsIos,\n  checkTestInBrowser,\n  checkTestInMobileBrowser,\n  getAddressBarShadowPadding,\n  getToolBarShadowPadding,\n} from '../helpers/utils';\nimport getScreenDimensions from '../clientSideScripts/getScreenDimensions';\nimport { Executor } from './methods.interface';\nimport { EnrichedInstanceData, InstanceOptions } from './instanceData.interfaces';\nimport { ScreenDimensions } from '../clientSideScripts/screenDimensions.interfaces';\n\n/**\n * Enrich the instance data with more data\n */\nexport default async function getEnrichedInstanceData(\n  executor: Executor,\n  instanceOptions: InstanceOptions,\n  addShadowPadding: boolean,\n): Promise<EnrichedInstanceData> {\n  // Get the current browser data\n  const browserData: ScreenDimensions = await executor(getScreenDimensions);\n  const { addressBarShadowPadding, toolBarShadowPadding, browserName, nativeWebScreenshot, platformName } = instanceOptions;\n\n  // Determine some constants\n  const isAndroid = checkIsAndroid(platformName);\n  const isIos = checkIsIos(platformName);\n  const isMobile = checkIsMobile(platformName);\n  const isTestInBrowser = checkTestInBrowser(browserName);\n  const isTestInMobileBrowser = checkTestInMobileBrowser(platformName, browserName);\n  const isAndroidNativeWebScreenshot = checkAndroidNativeWebScreenshot(platformName, nativeWebScreenshot);\n  const isAndroidChromeDriverScreenshot = checkAndroidChromeDriverScreenshot(platformName, nativeWebScreenshot);\n  const addressBarPadding = getAddressBarShadowPadding({\n    platformName,\n    browserName,\n    nativeWebScreenshot,\n    addressBarShadowPadding,\n    addShadowPadding,\n  });\n  const toolBarPadding = getToolBarShadowPadding({ platformName, browserName, toolBarShadowPadding, addShadowPadding });\n\n  // Return the new instance data object\n  return {\n    ...browserData,\n    ...instanceOptions,\n    addressBarShadowPadding: addressBarPadding,\n    isAndroid,\n    isAndroidChromeDriverScreenshot,\n    isAndroidNativeWebScreenshot,\n    isIos,\n    isMobile,\n    isTestInBrowser,\n    isTestInMobileBrowser,\n    toolBarShadowPadding: toolBarPadding,\n  };\n}\n"]}